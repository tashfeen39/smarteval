{% extends "portals/dashboard_template.html" %}


{% load static %}

<!-- ---------------- Block for Header ---------------- -->
{% block header %}
<link rel="stylesheet" href="{% static 'plugins/scrollbar/scroll.min.css' %}">
<link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,700,1,200" />

{% endblock %}


<!-- ---------------- Block for Body ---------------- -->
{% block body %}
<div class="page-wrapper">
    <div class="content container-fluid">

        <div class="page-header">
            <div class="row">
                <div class="col-sm-12">

                    <h5 class="card-title">Student Info</h5>

                </div>
                <div class="card">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-lg-4 col-md-4">
                                <div class="profile-user-box">
                                    <div class="profile-user-img">
                                        {% if student.user.profile_picture %}
                                        <img class="avatar-img rounded-circle"
                                            src="{{ student.user.profile_picture.url }}">
                                        {% else %}
                                        <span class="material-symbols-outlined">
                                            person
                                        </span>
                                        {% endif %}

                                    </div>
                                    <div class="names-profiles">
                                        <h4>{{ student.user.first_name }} {{ student.user.last_name }}</h4>
                                        <h5>{{ student.degree.degree_abbreviation }} - {{ student.section.semester }}
                                            {{ student.section.section_name }}</h5>
                                    </div>
                                </div>
                            </div>
                            <br>

                        </div>
                        <div class="table-responsive">
                            <table class="table border-0 table-center table-hover">
                                <thead class="student-thread sticky-header">
                                    <tr>
                                        <th>Roll No.</th>
                                        <th>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Name</th>
                                        {% for quiz_mark in quiz_marks %}
                                        <th>&nbsp;&nbsp;Quiz {{ quiz_mark.quiz_num }}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th>
                                        {% endfor %}

                                        {% for assignment_mark in assignment_marks %}
                                        <th>Assignment {{ assignment_mark.assignment_num }}</th>
                                        {% endfor %}

                                        {% for presentation_mark in presentation_marks %}
                                        <th>Presentation {{ presentation_mark.presentation_num }}</th>
                                        {% endfor %}

                                        <th>Semester Project</th>
                                        <th>Mid-term Marks</th>
                                        <th>Final Marks</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="table_width">{{ student.StudentID }}</td>
                                        <td>
                                            <h2 class="table-avatar">
                                                {{ student.user.first_name }} {{ student.user.last_name }}
                                            </h2>
                                        </td>
                                        {% for quiz_mark in quiz_marks %}
                                        <td>
                                            <input type="float" name="quiz" value="{{ quiz_mark.quiz_marks }}"
                                                class="form-control">
                                        </td>
                                        {% endfor %}
                                        {% for assignment_mark in assignment_marks %}
                                        <td>
                                            <input type="float" name="assignment"
                                                value="{{ assignment_mark.assignment_marks }}" class="form-control">
                                        </td>
                                        {% endfor %}
                                        {% for presentation_mark in presentation_marks %}
                                        <td>
                                            <input type="float" name="presentation"
                                                value="{{ presentation_mark.presentation_marks }}" class="form-control">
                                        </td>
                                        {% endfor %}


                                        <td>
                                            <!-- Editable input field for Mid-term Marks -->
                                            <input type="float" name="project_marks"
                                                value="{{ semester_marks_data.semester_project_marks }}"
                                                class="form-control" readonly>
                                        </td>

                                        <td>
                                            <!-- Editable input field for Mid-term Marks -->
                                            <input type="float" name="midterm_marks"
                                                value="{{ semester_marks_data.mids_marks }}" class="form-control"
                                                readonly>
                                        </td>
                                        <td>
                                            <!-- Editable input field for Final Marks -->
                                            <input type="float" name="final_marks"
                                                value="{{ semester_marks_data.final_marks }}" class="form-control"
                                                readonly>
                                        </td </tr>



                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


{% endblock %}

<!-- ---------------- Block for Footer ---------------- -->
{% block footer %}


<script src="{% static 'plugins/scrollbar/scrollbar.min.js' %}"></script>
<script src="{% static 'plugins/scrollbar/custom-scroll.js' %}"></script>
<script src="{% static 'plugins/flot/jquery.flot.js' %}"></script>
<script src="{% static 'plugins/flot/jquery.flot.fillbetween.js' %}"></script>
<script src="{% static 'plugins/flot/jquery.flot.pie.js' %}"></script>
<script src="{% static 'plugins/flot/chart-data.js' %}"></script>

<!-- Include Chart.js library -->
<script src="
https://cdn.jsdelivr.net/npm/chart.js@4.4.2/dist/chart.umd.min.js"></script>
<!-- Include Chart.js library -->

<!-- HTML structure for the chart -->
<canvas id="marksChart" width="400" height="200"></canvas>

<script>
    const labels = Utils.months({ count: 7 });
    const data = {
        labels: labels,
        datasets: [{
            label: 'My First Dataset',
            data: [65, 59, 80, 81, 56, 55, 40],
            backgroundColor: [
                'rgba(255, 99, 132, 0.2)',
                'rgba(255, 159, 64, 0.2)',
                'rgba(255, 205, 86, 0.2)',
                'rgba(75, 192, 192, 0.2)',
                'rgba(54, 162, 235, 0.2)',
                'rgba(153, 102, 255, 0.2)',
                'rgba(201, 203, 207, 0.2)'
            ],
            borderColor: [
                'rgb(255, 99, 132)',
                'rgb(255, 159, 64)',
                'rgb(255, 205, 86)',
                'rgb(75, 192, 192)',
                'rgb(54, 162, 235)',
                'rgb(153, 102, 255)',
                'rgb(201, 203, 207)'
            ],
            borderWidth: 1
        }]
    };
    const config = {
        type: 'bar',
        data: data,
        options: {
            scales: {
                y: {
                    beginAtZero: true
                }
            }
        },
    };
    // Create the chart
    var ctx = document.getElementById('marksChart').getContext('2d');
    var marksChart = new Chart(ctx, chartConfig);


    // Working graph

    // Get the marks data from Django views and pass it here
    var quizMarks = [2, 4, 5];
    var assignmentMarks = [5, 3, 2];
    var presentationMarks = [6, 2, 2];

    // Chart configuration
    var chartConfig = {
        type: 'bar',
        data: {
            labels: ['Quiz 1', 'Quiz 2', 'Quiz 3'], // Example labels
            datasets: [{
                label: 'Quiz Marks',
                data: quizMarks,
                backgroundColor: 'rgba(255, 99, 132, 0.2)', // Example color
                borderColor: 'rgba(255, 99, 132, 1)', // Example color
                borderWidth: 1
            }, {
                label: 'Assignment Marks',
                data: assignmentMarks,
                backgroundColor: 'rgba(54, 162, 235, 0.2)', // Example color
                borderColor: 'rgba(54, 162, 235, 1)', // Example color
                borderWidth: 1
            }, {
                label: 'Presentation Marks',
                data: presentationMarks,
                backgroundColor: 'rgba(255, 206, 86, 0.2)', // Example color
                borderColor: 'rgba(255, 206, 86, 1)', // Example color
                borderWidth: 1
            }]
        },
        options: {
            scales: {
                y: {
                    beginAtZero: true
                }
            }
        }
    };

    // Create the chart
    var ctx = document.getElementById('marksChart').getContext('2d');
    var marksChart = new Chart(ctx, chartConfig);
</script>


{% endblock %}